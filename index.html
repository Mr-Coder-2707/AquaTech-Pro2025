<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>AquaTech Pro - Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ | Ù…ØªØ¬Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="AquaTech Pro - Ø£ÙØ¶Ù„ Ù…ØªØ¬Ø± Ù„Ø£Ø¯ÙˆØ§Øª ÙˆÙ…Ø¹Ø¯Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ© ÙÙŠ Ù…ØµØ±. Ø®Ø¯Ù…Ø§Øª Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©ØŒ ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ØŒ Ø¶Ù…Ø§Ù† Ø´Ø§Ù…Ù„. Ø§Ø·Ù„Ø¨ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¢Ù†!">
  <meta name="keywords" content="Ø³Ø¨Ø§ÙƒØ©, Ø£Ø¯ÙˆØ§Øª Ø³Ø¨Ø§ÙƒØ©, Ù…ÙˆØ§Ø³ÙŠØ±, Ø­Ù†ÙÙŠØ§Øª, Ù…Ø¶Ø®Ø§Øª Ù…ÙŠØ§Ù‡, Ø³Ø¨Ø§Ùƒ, ØªØ±ÙƒÙŠØ¨Ø§Øª Ø³Ø¨Ø§ÙƒØ©, Ù…ØµØ±, ÙˆØ§ØªØ³Ø§Ø¨">
  <meta name="author" content="AquaTech Pro">
  <meta name="robots" content="index, follow">
  <meta name="language" content="Arabic">
  <meta name="geo.region" content="EG">
  <meta name="geo.country" content="Egypt">
  <link rel="icon" href="img/icon.png">
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="AquaTech Pro - Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
  <meta property="og:description" content="Ø£ÙØ¶Ù„ Ù…ØªØ¬Ø± Ù„Ø£Ø¯ÙˆØ§Øª ÙˆÙ…Ø¹Ø¯Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ© ÙÙŠ Ù…ØµØ±. Ø®Ø¯Ù…Ø§Øª Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©ØŒ ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ØŒ Ø¶Ù…Ø§Ù† Ø´Ø§Ù…Ù„">
  <meta property="og:image" content="https://mr-coder-2707.github.io/store1-test/img/icon.png">
  <meta property="og:url" content="https://mr-coder-2707.github.io/store1-test/">
  <meta property="og:type" content="website">
  <meta property="og:image:alt" content="Ø´Ø¹Ø§Ø± AquaTech Pro">
  <meta property="og:site_name" content="AquaTech Pro">
  <meta property="og:locale" content="ar_EG">
  <meta property="og:locale:alternate" content="en_US">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AquaTech Pro - Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
  <meta name="twitter:description" content="Ø£ÙØ¶Ù„ Ù…ØªØ¬Ø± Ù„Ø£Ø¯ÙˆØ§Øª ÙˆÙ…Ø¹Ø¯Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ© ÙÙŠ Ù…ØµØ±">
  <meta name="twitter:image" content="https://mr-coder-2707.github.io/store1-test/img/icon.png">
  <meta name="twitter:creator" content="@AquaTechPro">
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "AquaTech Pro",
    "description": "Ø®Ø¯Ù…Ø§Øª Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆÙ…ØªØ¬Ø± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©",
    "url": "https://mr-coder-2707.github.io/store1-test/",
    "telephone": "+201557609572",
    "priceRange": "$$",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "EG",
      "addressLocality": "Cairo"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "30.0444",
      "longitude": "31.2357"
    },
    "openingHours": "Mo-Sa 09:00-18:00",
    "serviceArea": {
      "@type": "Country",
      "name": "Egypt"
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©",
      "itemListElement": [
        {
          "@type": "OfferCatalog",
          "name": "Ù…ÙˆØ§Ø³ÙŠØ±",
          "itemListElement": []
        },
        {
          "@type": "OfferCatalog", 
          "name": "Ø­Ù†ÙÙŠØ§Øª",
          "itemListElement": []
        },
        {
          "@type": "OfferCatalog",
          "name": "Ø£Ø¯ÙˆØ§Øª Ø³Ø¨Ø§ÙƒØ©",
          "itemListElement": []
        }
      ]
    }
  }
  </script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://mr-coder-2707.github.io/store1-test/">
  
  <!-- External CSS -->
  <link rel="stylesheet" href="style.css">
  
  <!-- Google Fonts (if needed) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <style>
    /* Enhanced Cart Styling */
    .cart {
      background: linear-gradient(145deg, #1e293b, #0f172a);
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }

    .cart::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #22c55e, #16a34a, #059669);
    }

    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cart-header h2 {
      margin: 0;
      color: #e5e7eb;
      font-size: 1.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .cart-counter {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      display: inline-flex !important;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      animation: pulse 2s infinite;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .cart-items {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
      padding-right: 8px;
    }

    .cart-items::-webkit-scrollbar {
      width: 6px;
    }

    .cart-items::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
    }

    .cart-items::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #22c55e, #16a34a);
      border-radius: 3px;
    }

    .cart-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cart-item:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }

    .cart-item img {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-name {
      font-weight: 600;
      color: #e5e7eb;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .cart-item-price {
      color: #22c55e;
      font-weight: 500;
      font-size: 13px;
    }

    .cart-qty-controls {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 4px 8px;
    }

    .cart-qty-controls button {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border: none;
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cart-qty-controls button:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
    }

    .cart-qty-display {
      color: #e5e7eb;
      font-weight: bold;
      min-width: 24px;
      text-align: center;
    }

    .cart-summary {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05));
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(34, 197, 94, 0.3);
      margin-bottom: 20px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding: 8px 0;
    }

    .summary-row.total {
      border-top: 1px solid rgba(34, 197, 94, 0.3);
      margin-top: 16px;
      padding-top: 16px;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .summary-label {
      color: #9ca3af;
      font-size: 14px;
    }

    .summary-value {
      color: #22c55e;
      font-weight: 600;
    }

    .summary-value.total {
      color: #16a34a;
      font-size: 1.3rem;
    }

    .empty-cart {
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
    }

    .empty-cart-icon {
      font-size: 4rem;
      margin-bottom: 16px;
      opacity: 0.6;
    }

    /* Floating Cart Button */
    .floating-cart {
      position: fixed;
      bottom: 80px;
      right: 24px;
      z-index: 1000;
      background: linear-gradient(135deg, #22c55e, #16a34a, #059669);
      color: white;
      border: none;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(34, 197, 94, 0.5);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      display: none;
      border: 3px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    .floating-cart::before {
      content: 'ğŸ›’';
      font-size: 30px;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .floating-cart:hover {
      transform: scale(1.15) translateY(-4px) rotate(5deg);
      box-shadow: 0 15px 40px rgba(34, 197, 94, 0.7);
      background: linear-gradient(135deg, #16a34a, #059669, #047857);
    }

    .floating-cart:active {
      transform: scale(1.05) translateY(-2px);
    }

    .floating-cart.visible {
      display: flex;
      align-items: center;
      justify-content: center;
      animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .floating-cart-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      font-size: 13px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
      animation: pulse 2s infinite;
    }

    @keyframes bounceIn {
      0% {
        transform: scale(0.3) translateY(100px);
        opacity: 0;
      }
      50% {
        transform: scale(1.05) translateY(-10px);
      }
      70% {
        transform: scale(0.9) translateY(0);
      }
      100% {
        transform: scale(1) translateY(0);
        opacity: 1;
      }
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .cart {
        border-radius: 16px;
        padding: 16px;
      }
      
      .cart-item {
        padding: 12px;
        gap: 12px;
      }
      
      .cart-item img {
        width: 50px;
        height: 50px;
      }
      
      .floating-cart {
        bottom: 70px;
        right: 20px;
        width: 60px;
        height: 60px;
        font-size: 24px;
      }
      
      .floating-cart::before {
        font-size: 26px;
      }
      
      .floating-cart-badge {
        width: 24px;
        height: 24px;
        font-size: 12px;
        top: -8px;
        right: -8px;
      }
    }

    /* Enhanced checkout button */
    .checkout-bar .btn {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border: none;
      color: white;
      padding: 16px 24px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 12px;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(34, 197, 94, 0.3);
    }

    .checkout-bar .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(34, 197, 94, 0.4);
      background: linear-gradient(135deg, #16a34a, #059669);
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title">AquaTech Pro â€¢ Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</div>
        <div class="subtitle">Ø®Ø¯Ù…Ø§Øª Ø³Ø¨Ø§ÙƒØ© Ù…ØªÙ…ÙŠØ²Ø© â† Ø·Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª â† ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹</div>
      </div>
    </div>
  </header>

  <nav>
    <div class="nav-container">
      <a href="index.html" class="nav-link active">ğŸª Ø§Ù„Ù…ØªØ¬Ø±</a>
      <a href="about.html" class="nav-link">ğŸ‘¥ Ù…Ù† Ù†Ø­Ù†</a>
      <a href="terms.html" class="nav-link">ğŸ“‹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a>
    </div>
  </nav>

  <section class="search-section">
    <div class="search-container">
      <div class="search-icon">ğŸ”</div>
      <input type="text" class="search-input" id="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...">
    </div>
    <div class="filter-tags" id="filter-tags">
      <div class="filter-tag active" data-category="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
      <div class="filter-tag" data-category="Ù…ÙˆØ§Ø³ÙŠØ±">Ù…ÙˆØ§Ø³ÙŠØ±</div>
      <div class="filter-tag" data-category="Ø­Ù†ÙÙŠØ§Øª">Ø­Ù†ÙÙŠØ§Øª</div>
      <div class="filter-tag" data-category="Ø£Ø¯ÙˆØ§Øª">Ø£Ø¯ÙˆØ§Øª</div>
      <div class="filter-tag" data-category="Ù‚Ø·Ø¹ ØºÙŠØ§Ø±">Ù‚Ø·Ø¹ ØºÙŠØ§Ø±</div>
      <div class="filter-tag" data-category="Ù…Ø¶Ø®Ø§Øª">Ù…Ø¶Ø®Ø§Øª</div>
    </div>
  </section>

  <main>
    <section class="grid" id="products"></section>

    <section class="cart" aria-labelledby="cart-title">
      <div class="cart-header">
        <h2 id="cart-title">
          Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ 
          <span class="cart-counter" id="cart-counter" style="display:none">0</span>
        </h2>
        <button class="btn secondary" id="clear-cart" style="display:none">Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©</button>
      </div>
      
      <div class="cart-items" id="cart-items"></div>
      
      <div class="empty-cart" id="cart-empty">
        <div class="empty-cart-icon">ï¿½ï¸</div>
        <div>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</div>
        <div class="muted" style="font-size:14px; margin-top:4px">Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ© Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬Ù‡Ø§!</div>
      </div>

      <div class="cart-summary" id="cart-summary" style="display:none">
        <div class="summary-row">
          <span class="summary-label">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</span>
          <span class="summary-value" id="items-count">0</span>
        </div>
        <div class="summary-row">
          <span class="summary-label">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
          <span class="summary-value" id="subtotal">0.00</span>
        </div>
        <div class="summary-row total">
          <span class="summary-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
          <span class="summary-value total" id="total-amount">0.00</span>
        </div>
        
        <div class="checkout-bar">
          <button class="btn" id="checkout">Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</button>
        </div>
      </div>

      <div class="form" id="checkout-form" style="display:none">
        <div class="field">
          <label for="cust-name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
          <input id="cust-name" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" />
        </div>
        <div class="field">
          <label for="cust-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input id="cust-phone" placeholder="Ù…Ø«Ø§Ù„: 201001234567" />
        </div>
        <div class="field">
          <label for="cust-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
          <input id="cust-email" type="email" placeholder="Ù…Ø«Ø§Ù„: name@example.com" />
        </div>
        <div class="field">
          <label for="cust-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹/Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input id="cust-location" placeholder="Ø§Ù„Ù‚Ù„Ø¬ /Ø§Ù„Ø¨Ù„Ø¯ /Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„ÙƒØ¨ÙŠØ±" />
        </div>
        <div class="error" id="form-error"></div>
        <div class="ok" id="form-ok"></div>
        
        <!-- Warning message before checkout -->
        <div class="warning-box">
          <div class="warning-header">
            <span class="warning-icon">âš ï¸</span>
            <strong>ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù… Ù‚Ø¨Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</strong>
          </div>
          <ul class="warning-list">
            <li><strong>ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± "ğŸ‘ï¸" Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙƒÙ„ Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø©</li>
            <li><strong>ğŸ”„ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„:</strong> ÙŠØ­Ù‚ Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ù†ØªØ¬ Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù… Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø¨Ø´Ø±Ø· Ø¹Ø¯Ù… Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</li>
            <li><strong>ğŸ“¦ ÙØ­Øµ Ø§Ù„Ù…Ù†ØªØ¬:</strong> ÙŠØ¬Ø¨ ÙØ­Øµ Ø§Ù„Ù…Ù†ØªØ¬ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø³Ù„Ø§Ù…ØªÙ‡ Ù‚Ø¨Ù„ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</li>
            <li><strong>ğŸšš Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ Ù…Ù† 10Ø¬ Ø§Ù„ÙŠ 20Ø¬ Ù„Ø§ÙŠ Ù…ÙƒØ§Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ù„Ø¬ Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹:</strong> Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØªØ­Ù…Ù„ Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù† ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¹ÙŠØ¨ Ø¨Ø§Ù„Ù…Ù†ØªØ¬</li>

          </ul>
          <div class="warning-footer">
            ğŸ’¡ Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø­ÙˆÙ„ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ ÙˆØ§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù‚Ø¨Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨
          </div>
        </div>

        <!-- Terms and Conditions Agreement -->
        <div class="terms-agreement">
          <div class="terms-checkbox">
            <input type="checkbox" id="terms-agree" required>
            <label for="terms-agree" class="terms-text">
              <strong>âœ… Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø´Ø±ÙˆØ·</strong><br>
              ÙÙŠ Ø­Ø§Ù„ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø£Ù†Øª ÙƒØ¯Ù‡ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ­Ù‚ÙˆÙ‚ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ ÙˆØ§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙˆØªØ·Ø¨Ù‚ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
            </label>
          </div>
          <div class="terms-notice">
            âš–ï¸ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨" ØªØ¤ÙƒØ¯ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…Ø§ ÙˆØ±Ø¯ Ø£Ø¹Ù„Ø§Ù‡ ÙˆØªØµØ¨Ø­ Ù…Ù„Ø²Ù…Ø§Ù‹ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ§Ù‹ Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ·
          </div>
        </div>
        
        <div class="btn-actions">
          <button class="btn" id="send-whatsapp">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</button>
          <button class="btn secondary" id="test-whatsapp">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</button>
          <button class="btn secondary" id="test-samsung" style="background: #ff6b35;">Ø§Ø®ØªØ¨Ø§Ø± Samsung</button>
          <button class="btn secondary" id="test-apple" style="background: #007AFF;">Ø§Ø®ØªØ¨Ø§Ø± Apple</button>
          <button class="btn secondary" id="cancel-checkout" type="button">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
        <div class="form-small-text">
          Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„ØŒ Ø³ÙŠØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©. Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ØŒ Ø³ÙŠØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯. Ø§Ù„ØµÙˆØ± Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø±ÙØ§Ù‚Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹Ø› Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ù…Ø¶Ù…Ù†Ø© ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©.
        </div>
      </div>
    </section>
  </main>

  <!-- Product Preview Modal -->
  <div class="modal-overlay" id="preview-modal">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ØªØ¬</h3>
        <button class="modal-close" id="close-preview">&times;</button>
      </div>
      <div class="modal-body">
        <img class="preview-image" id="preview-img" src="" alt="">
        <div class="preview-category" id="preview-cat">ÙØ¦Ø©</div>
        <h2 class="preview-title" id="preview-name">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</h2>
        <div class="preview-price" id="preview-price">0.00 Ø¬Ù†ÙŠÙ‡</div>
        <div class="preview-description" id="preview-desc">
          Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆÙ…ØµÙ†ÙˆØ¹ Ù…Ù† Ù…ÙˆØ§Ø¯ Ø·Ø¨ÙŠØ¹ÙŠØ© 100%. ÙŠØªÙ…ÙŠØ² Ø¨Ù†ÙƒÙ‡Ø© Ø±Ø§Ø¦Ø¹Ø© ÙˆÙÙˆØ§Ø¦Ø¯ ØµØ­ÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø©.
          Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙˆÙŠØ£ØªÙŠ Ø¨ØªØºÙ„ÙŠÙ Ù…Ø­ÙƒÙ… Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ù†Ø¶Ø§Ø±Ø©.
        </div>
        <div class="preview-controls">
          <div class="preview-qty">
            <button type="button" id="preview-minus">âˆ’</button>
            <input type="number" id="preview-quantity" min="1" value="1" readonly>
            <button type="button" id="preview-plus">+</button>
          </div>
          <button class="btn" id="preview-add-to-cart">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Cart Button -->
  <button class="floating-cart" id="floating-cart" type="button">
    <span class="floating-cart-badge" id="floating-cart-badge">0</span>
  </button>

  <footer>
    Â© <span id="year"></span> AquaTech Pro - Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©. Ø®Ø¯Ù…Ø§Øª Ø³Ø¨Ø§ÙƒØ© Ù…ØªÙ…ÙŠØ²Ø© ÙˆØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹.
  </footer>

  <script>
    // ======= CONFIG =======
    const STORE_WHATSAPP_NUMBER = '201557609572'; // Egyptian number format
    const CURRENCY = 'EGP';

    // Debug info
    console.log('Store WhatsApp Number:', STORE_WHATSAPP_NUMBER);
    console.log('User Agent:', navigator.userAgent);

    // Sample product catalog (edit as needed)
    const PRODUCTS = [
            { 
        id: 'p1', 
        name: 'Ø¨ÙƒØ±Ø© ØªÙÙ„ÙˆÙ† 50 Ù…ØªØ± Ø­Ø¬Ù… ÙƒØ¨ÙŠØ± ', 
        price:20, 
        category: 'Ø£Ø¯ÙˆØ§Øª', 
        img:'./img/20250909_125009.jpg',
        description: 'Ø¨ÙƒØ±Ø© ØªÙÙ„ÙˆÙ† Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© 50 Ù…ØªØ± Ø­Ø¬Ù… ÙƒØ¨ÙŠØ±ØŒ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø³Ø¨Ø§ÙƒØ© ÙˆØ§Ù„ØªØ±ÙƒÙŠØ¨Ø§Øª'
            },
              { 
        id: 'p2', 
        name: 'Ù‚Ù„Ø¨ Ø­Ù†ÙÙŠØ© /ÙˆØ®Ù„Ø§Ø· 3.5 Ù„Ù†ÙŠÙ‡ Ø§ÙŠØ·Ø§Ù„ÙŠ ', 
        price: 25, 
        category: 'Ù‚Ø·Ø¹ ØºÙŠØ§Ø±', 
        img: './img/20250909_124903.jpg',
        description: 'Ù‚Ù„Ø¨ Ø­Ù†ÙÙŠØ© Ø¥ÙŠØ·Ø§Ù„ÙŠ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© 3.5 Ù„Ù†ÙŠÙ‡ØŒ Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„ØªØ¢ÙƒÙ„ ÙˆÙŠØ¯ÙˆÙ… Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©'
            },
      { 
        id: 'p3', 
        name: 'Ø­Ù†ÙÙŠØ© Ù…Ø·Ø¨Ø® Ø³ØªØ§Ù†Ù„Ø³ Ø³ØªÙŠÙ„ Ù…Ø¹ Ø±Ø´Ø§Ø´', 
        price: 35, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img: './img/2.png',
        description: 'Ø­Ù†ÙÙŠØ© Ù…Ø·Ø¨Ø® ÙØ§Ø®Ø±Ø© Ù…Ù† Ø§Ù„Ø³ØªØ§Ù†Ù„Ø³ Ø³ØªÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„ØµØ¯Ø£. Ù…Ø²ÙˆØ¯Ø© Ø¨Ø±Ø´Ø§Ø´ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø³Ø­Ø¨. ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ Ø£Ù†ÙŠÙ‚. Ø³Ù‡Ù„Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©. Ø¶Ù…Ø§Ù† 5 Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØµÙ†Ø¹Ø©.'
            },
            { 
        id: 'p4', 
        name: 'Ø³ÙŠÙÙˆÙ† Ø­Ù…Ø§Ù… ÙƒØ±ÙˆÙ… Ù„Ø§Ù…Ø¹', 
        price: 50, 
        category: 'Ù‚Ø·Ø¹ ØºÙŠØ§Ø±', 
        img: './img/6.png',
        description: 'Ø³ÙŠÙÙˆÙ† Ø­Ù…Ø§Ù… Ù…Ù† Ø§Ù„ÙƒØ±ÙˆÙ… Ø§Ù„Ù„Ø§Ù…Ø¹ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„ØªØ¢ÙƒÙ„. ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚ ÙŠÙ†Ø§Ø³Ø¨ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª Ø§Ù„Ø¹ØµØ±ÙŠØ©. Ø³Ù‡Ù„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©. Ù…Ø²ÙˆØ¯ Ø¨ØµÙ…Ø§Ù… Ù…Ù†Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¦Ø­. ØªØ±ÙƒÙŠØ¨ Ø³Ù‡Ù„ Ø¨Ø¯ÙˆÙ† Ø£Ø¯ÙˆØ§Øª Ø®Ø§ØµØ©.'
            },
            { 
        id: 'p5', 
        name: 'Ø­Ù†ÙÙŠØ© pg  smart copper Ù†Ø­Ø§Ø³ Ø¨Ù„Ø¯ÙŠ', 
        price: 135, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/PG-CU.jpg',
        description: 'Ø­Ù†ÙÙŠØ© Ù†Ø­Ø§Ø³ Ø¨ÙƒØ§Ù…Ù„ Ù„Ø§ ØªØµØ¯Ø£ Ø§Ù„Ù‚Ù„Ø¨ Ù„Ø§ ÙŠØªÙ„Ù Ø¨ÙŠØªØºÙŠØ± Ù„Ù‡ Ø¬ÙˆØ§Ù† "Ø¬Ù„Ø¯ Ø­Ù†ÙÙŠØ© Ø¨Ù„Ø¯ÙŠ"Ø¨Ø¶Ù…Ø§Ù† Ø§Ø³Ù…Ø±Øª ÙƒÙˆØ¨ÙŠØ± '
            },
              { 
        id: 'p6', 
        name: 'Ø­Ù†ÙÙŠØ© pg  smart copper Ù†Ø­Ø§Ø³ Ø³ÙƒÙŠÙ†Ø©', 
        price: 110, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/PG-OR.jpg',
        description: 'Ø­Ù†ÙÙŠØ© Ù†Ø­Ø§Ø³ Ø¨ÙƒØ§Ù…Ù„ Ù„Ø§ ØªØµØ¯Ø£ "Ø³ÙƒÙŠÙ†Ø© Ù„Ø§ÙƒÙˆØ± Ù†Ø­Ø§Ø³ " Ø¨Ø¶Ù…Ø§Ù† Ø§Ø³Ù…Ø±Øª ÙƒÙˆØ¨ÙŠØ± '
            },
                    { 
        id: 'p7', 
        name: 'Ø­Ù†ÙÙŠØ© pg  smart copper Ù†Ø­Ø§Ø³ Ø³ÙƒÙŠÙ†Ø©', 
        price: 125, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/PG-RED.jpg',
        description: 'Ø­Ù†ÙÙŠØ© Ù†Ø­Ø§Ø³ Ø¨ÙƒØ§Ù…Ù„ Ù„Ø§ ØªØµØ¯Ø£ "Ø³ÙƒÙŠÙ†Ø© Ù„Ø§ÙƒÙˆØ± Ù†Ø­Ø§Ø³  ÙˆÙ„Ø§ÙƒÙˆØ± Ø¨Ù„Ø§Ø³ØªÙƒ Ø§Ø­Ù…Ø± " Ø¨Ø¶Ù…Ø§Ù† Ø§Ø³Ù…Ø±Øª ÙƒÙˆØ¨ÙŠØ± '
            },
        { 
        id: 'p8', 
        name: 'Ø­Ù†ÙÙŠØ© LAVOR  smart copper Ù†Ø­Ø§Ø³ Ø³ÙƒÙŠÙ†Ø©', 
        price: 70, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/LAVOR-B.jpg',
        description: 'Ø­Ù†ÙÙŠØ© Ù†Ø­Ø§Ø³ Ø¨ÙƒØ§Ù…Ù„ Ù„Ø§ ØªØµØ¯Ø£ "Ø³ÙƒÙŠÙ†Ø© Ù„Ø§ÙƒÙˆØ±  Ø¨Ù„Ø§Ø³ØªÙƒ ÙˆØ²Ù† Ø®ÙÙŠÙ " Ø¨Ø¶Ù…Ø§Ù† Ø§Ø³Ù…Ø±Øª ÙƒÙˆØ¨ÙŠØ± '
            },
                    { 
        id: 'p9', 
        name: 'Ø­Ù†ÙÙŠØ©Ø³ÙƒÙŠÙ†Ø© PVC Ø¨Ù„Ø§Ø³ØªÙƒ Ø§Ø¨ÙŠØ¶', 
        price: 45, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/PVC-W.jpg',
        description:' Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù† Ø§Ù„Ø­Ù†ÙÙŠØ§Øª Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙƒ Ù„Ø§ØªØ±Ø¯ Ùˆ Ù„Ø§ ØªØ³ØªØ¨Ø¯Ù„ Ø§Ù„ÙŠØ¯ Ø¨Ù„Ø§Ø³ØªÙƒ Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ù‚Ø·Ø¹Ø© Ø­Ø¯ÙŠØ¯ Ø­Ù†ÙÙŠØ©Ø³ÙƒÙŠÙ†Ø© PVC Ø¨Ù„Ø§Ø³ØªÙƒ Ø§Ø¨ÙŠØ¶ "Ø¨Ø³Ù† Ù†Ø­Ø§Ø³ Ùˆ Ø§Ù„Ø¬Ø³Ù… PVC"' 
            },
                    { 
        id: 'p10', 
        name: 'Ø­Ù†ÙÙŠØ©Ø³ÙƒÙŠÙ†Ø© PVC Ø¨Ù„Ø§Ø³ØªÙƒ Ø§Ø³ÙˆØ¯', 
        price: 35, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/PVC-B.jpg',
        description:'Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù† Ø§Ù„Ø­Ù†ÙÙŠØ§Øª Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙƒ Ù„Ø§ØªØ±Ø¯ Ùˆ Ù„Ø§ ØªØ³ØªØ¨Ø¯Ù„  Ø­Ù†ÙÙŠØ©Ø³ÙƒÙŠÙ†Ø© PVC  Ø§Ù„ÙŠØ¯ Ø¨Ù„Ø§Ø³ØªÙƒ Ø¨ÙƒØ§Ù…Ù„  Ø¨Ù„Ø§Ø³ØªÙƒ Ø§Ø³ÙˆØ¯ "Ø¨Ø³Ù† Ù†Ø­Ø§Ø³ Ùˆ Ø§Ù„Ø¬Ø³Ù… PVC"' 
            },
                                { 
        id: 'p11', 
        name: 'Ø­Ù†ÙÙŠØ© Ù…Ø§ÙƒÙ†ÙŠØ© Ø¶ØºØ· ÙƒÙ†Ø¨Ù†ÙŠØ´Ù† FIRST ', 
        price: 35, 
        category: 'Ø­Ù†ÙÙŠØ§Øª', 
        img:'./img/FIRST.jpg',
        description:'Ø­Ù†ÙÙŠØ© Ù…Ø§ÙƒÙ†ÙŠØ© ÙƒÙ†Ø¨Ù†ÙŠØ´Ù† FIRST Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù† Ø§Ù„Ø­Ù†ÙÙŠØ§Øª Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙƒ Ù„Ø§ØªØ±Ø¯ Ùˆ Ù„Ø§ ØªØ³ØªØ¨Ø¯Ù„'
                },


        ];
    // ======= STATE =======
    const cart = new Map(); // id -> { product, qty }
    let currentFilter = 'all';
    let searchTerm = '';
    let currentPreviewProduct = null;

    // ======= HELPERS =======
    const fmt = (n) => new Intl.NumberFormat(undefined, { style: 'currency', currency: CURRENCY, maximumFractionDigits: 2 }).format(n);

    function getFilteredProducts() {
      return PRODUCTS.filter(product => {
        const matchesSearch = searchTerm === '' || product.name.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesFilter = currentFilter === 'all' || product.category === currentFilter;
        return matchesSearch && matchesFilter;
      });
    }

    function renderProducts() {
      const list = document.getElementById('products');
      list.innerHTML = '';
      const filteredProducts = getFilteredProducts();
      
      if (filteredProducts.length === 0) {
        list.innerHTML = `
          <div style="grid-column: span 12; text-align: center; padding: 40px; color: var(--muted);">
            <div style="font-size: 48px; margin-bottom: 16px;">ğŸ”</div>
            <div>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª</div>
            <div style="font-size: 14px; margin-top: 8px;">Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØºÙŠØ± Ø§Ù„ÙÙ„ØªØ±</div>
          </div>
        `;
        return;
      }

      filteredProducts.forEach(p => {
        const el = document.createElement('article');
        el.className = 'product';
        el.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="body">
            <h3>${p.name}</h3>
            <div class="price">${fmt(p.price)}</div>
            <div class="controls">
              <div class="qty" data-id="${p.id}">
                <button type="button" aria-label="ØªÙ‚Ù„ÙŠÙ„">âˆ’</button>
                <input type="number" min="1" value="1" inputmode="numeric" />
                <button type="button" aria-label="Ø²ÙŠØ§Ø¯Ø©">+</button>
              </div>
              <button class="btn preview" data-id="${p.id}">ğŸ‘ï¸</button>
              <button class="btn add" data-id="${p.id}">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
            </div>
          </div>
        `;
        list.appendChild(el);
      });

      // attach qty controls
      list.querySelectorAll('.qty').forEach(q => {
        const input = q.querySelector('input');
        q.children[0].addEventListener('click', () => { input.value = Math.max(1, (parseInt(input.value||'1',10)-1)); });
        q.children[2].addEventListener('click', () => { input.value = Math.max(1, (parseInt(input.value||'1',10)+1)); });
      });

      // add-to-cart handlers
      list.querySelectorAll('.btn.add').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.getAttribute('data-id');
          const p = PRODUCTS.find(x => x.id === id);
          const qtyInput = btn.parentElement.querySelector('input');
          const qty = Math.max(1, parseInt(qtyInput.value || '1', 10));
          const existing = cart.get(id);
          cart.set(id, { product: p, qty: (existing?.qty || 0) + qty });
          renderCart();
          
          // Add animation effect
          btn.classList.add('animate-add');
          btn.textContent = 'ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“';
          setTimeout(() => {
            btn.textContent = 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©';
            btn.classList.remove('animate-add');
          }, 1000);
        });
      });

      // preview handlers
      list.querySelectorAll('.btn.preview').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.getAttribute('data-id');
          const product = PRODUCTS.find(x => x.id === id);
          if (product) {
            showProductPreview(product);
          }
        });
      });
    }

    function renderCart() {
      const container = document.getElementById('cart-items');
      const empty = document.getElementById('cart-empty');
      const summary = document.getElementById('cart-summary');
      const counter = document.getElementById('cart-counter');
      const clearBtn = document.getElementById('clear-cart');
      
      container.innerHTML = '';
      let subtotal = 0;
      let itemsCount = 0;

      if (cart.size === 0) {
        empty.style.display = 'block';
        summary.style.display = 'none';
        counter.style.display = 'none';
        clearBtn.style.display = 'none';
        document.getElementById('checkout-form').style.display = 'none';
        updateFloatingCart(0);
        return;
      }
      
      empty.style.display = 'none';
      summary.style.display = 'block';
      counter.style.display = 'inline-block';
      clearBtn.style.display = 'inline-block';

      cart.forEach(({product, qty}) => {
        const line = product.price * qty;
        subtotal += line;
        itemsCount += qty;
        
        const item = document.createElement('div');
        item.className = 'cart-item';
        item.innerHTML = `
          <img src="${product.img}" alt="${product.name}">
          <div class="cart-item-info">
            <div class="cart-item-name">${product.name}</div>
            <div class="cart-item-price">${fmt(product.price)} Ã— ${qty} = ${fmt(line)}</div>
          </div>
          <div class="cart-qty-controls">
            <button class="minus" data-id="${product.id}">âˆ’</button>
            <div class="cart-qty-display">${qty}</div>
            <button class="plus" data-id="${product.id}">+</button>
          </div>
          <button class="btn danger remove" data-id="${product.id}">Ø­Ø°Ù</button>
        `;
        container.appendChild(item);
      });

      // Update summary
      counter.textContent = itemsCount;
      document.getElementById('items-count').textContent = itemsCount;
      document.getElementById('subtotal').textContent = fmt(subtotal);
      document.getElementById('total-amount').textContent = fmt(subtotal);

      // Update floating cart button
      updateFloatingCart(itemsCount);

      container.querySelectorAll('.minus').forEach(b=>{
        b.addEventListener('click', ()=>{
          const id = b.getAttribute('data-id');
          const entry = cart.get(id);
          if (!entry) return;
          entry.qty = Math.max(1, entry.qty - 1);
          cart.set(id, entry);
          renderCart();
        });
      });
      container.querySelectorAll('.plus').forEach(b=>{
        b.addEventListener('click', ()=>{
          const id = b.getAttribute('data-id');
          const entry = cart.get(id);
          if (!entry) return;
          entry.qty += 1;
          cart.set(id, entry);
          renderCart();
        });
      });
      container.querySelectorAll('.remove').forEach(b=>{
        b.addEventListener('click', ()=>{
          cart.delete(b.getAttribute('data-id'));
          renderCart();
        });
      });
    }

    function showCheckoutForm(show=true){
      document.getElementById('checkout-form').style.display = show ? '' : 'none';
      document.getElementById('form-error').style.display = 'none';
      document.getElementById('form-ok').style.display = 'none';
    }

    function showProductPreview(product) {
      currentPreviewProduct = product;
      
      // Update modal content
      document.getElementById('preview-img').src = product.img;
      document.getElementById('preview-img').alt = product.name;
      document.getElementById('preview-cat').textContent = product.category;
      document.getElementById('preview-name').textContent = product.name;
      document.getElementById('preview-price').textContent = fmt(product.price);
      document.getElementById('preview-desc').textContent = product.description;
      document.getElementById('preview-quantity').value = 1;
      
      // Show modal
      document.getElementById('preview-modal').style.display = 'flex';
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
    }

    function hideProductPreview() {
      document.getElementById('preview-modal').style.display = 'none';
      document.body.style.overflow = 'auto'; // Restore scrolling
      currentPreviewProduct = null;
    }

    function validateForm() {
      const name = document.getElementById('cust-name').value.trim();
      const phone = document.getElementById('cust-phone').value.trim();
      const email = document.getElementById('cust-email').value.trim();
      const location = document.getElementById('cust-location').value.trim();
      const termsAgreed = document.getElementById('terms-agree').checked;
      const errors = [];

      if (name.length < 2) errors.push('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„.');
      
      // More flexible phone validation
      const cleanPhone = phone.replace(/\D/g, '');
      if (cleanPhone.length < 8 || cleanPhone.length > 15) {
        errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 8-15 Ø±Ù‚Ù… Ø¨Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© (Ù…Ø«Ø§Ù„: 201001234567).');
      }
      
      if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        errors.push('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­ Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹.');
      }

      if (location.length < 5) {
        errors.push('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ (Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ø´Ø§Ø±Ø¹).');
      }

      if (!termsAgreed) {
        errors.push('ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ù‚Ø¨Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨.');
      }

      return { valid: errors.length === 0, errors, name, phone: cleanPhone, email, location, termsAgreed };
    }

    function buildWhatsappMessage(customer, items) {
      const lines = [];
      lines.push(`ï¿½ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† AquaTech Pro*`);
      lines.push('');
      lines.push(`ğŸ‘¤ *Ø§Ù„Ø¹Ù…ÙŠÙ„*: ${customer.name}`);
      lines.push(`ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ*: ${customer.phone}`);
      if (customer.email) lines.push(`âœ‰ï¸ *Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ*: ${customer.email}`);
      lines.push(`ğŸ“ *Ø§Ù„Ù…ÙˆÙ‚Ø¹*: ${customer.location}`);
      lines.push('');
      lines.push(`ğŸ› ï¸ *Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:*`);
      let total = 0;
      items.forEach(({product, qty})=>{
        const line = product.price * qty;
        total += line;
        lines.push(`â€¢ ${product.name} â€” ${qty} Ã— ${product.price} ${CURRENCY} = ${line} ${CURRENCY}`);
        lines.push(`   Ø§Ù„ØµÙˆØ±Ø©: ${product.img}`);
      });
      lines.push('');
      lines.push(`ğŸ’° *Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨*: ${total} ${CURRENCY}`);
      lines.push('');
      lines.push(`ğŸšš *ÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙˆÙØ± ÙˆÙ…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØªÙˆØµÙŠÙ„*`);
      lines.push(`ğŸ  *Ø®Ø¯Ù…Ø© Ø§Ù„ØªØ±ÙƒÙŠØ¨ Ù…ØªÙˆÙØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨*`);
      return lines.join('\n');
    }

    function openWhatsapp(message, toNumber) {
      // Clean and format the phone number
      const cleanNumber = toNumber.replace(/\D/g, ''); // Remove non-digits
      
      // Create multiple WhatsApp URL formats
      const waUrl = `https://wa.me/${cleanNumber}?text=${encodeURIComponent(message)}`;
      const whatsappUrl = `whatsapp://send?phone=${cleanNumber}&text=${encodeURIComponent(message)}`;
      const apiUrl = `https://api.whatsapp.com/send?phone=${cleanNumber}&text=${encodeURIComponent(message)}`;
      
      console.log('Opening WhatsApp with multiple methods');
      console.log('Primary URL:', waUrl);
      console.log('User Agent:', navigator.userAgent);
      
      // Enhanced device detection including Apple devices
      const userAgent = navigator.userAgent.toLowerCase();
      const isAndroid = /android/i.test(userAgent);
      const isSamsung = /samsung/i.test(userAgent);
      const isApple = /iphone|ipad|ipod|mac/i.test(userAgent);
      const isIPhone = /iphone/i.test(userAgent);
      const isIPad = /ipad/i.test(userAgent);
      const isTablet = /tablet|ipad/i.test(userAgent);
      const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(userAgent);
      const isSafari = /safari/i.test(userAgent) && !/chrome/i.test(userAgent);
      
      console.log('Device info:', { isAndroid, isSamsung, isApple, isIPhone, isIPad, isTablet, isMobile, isSafari });
      
      // Apple-specific opening methods
      function forceAppleOpen() {
        console.log('Applying Apple-specific methods...');
        
        // Method 1: Safari-optimized approach
        if (isSafari) {
          console.log('Safari detected - using Safari-optimized method');
          
          // Create a hidden link and click it (works better in Safari)
          const link = document.createElement('a');
          link.href = waUrl;
          link.target = '_self'; // Same window for iOS
          link.style.display = 'none';
          document.body.appendChild(link);
          
          // Use setTimeout to ensure DOM is ready
          setTimeout(() => {
            link.click();
            document.body.removeChild(link);
          }, 100);
          
          // Fallback for Safari
          setTimeout(() => {
            console.log('Safari fallback...');
            window.location.href = waUrl;
          }, 2000);
          
        } else {
          // For other browsers on iOS (Chrome, Firefox, etc.)
          console.log('Non-Safari iOS browser detected');
          
          // Try app URL first
          window.location.href = whatsappUrl;
          
          // Quick fallback to wa.me
          setTimeout(() => {
            window.location.href = waUrl;
          }, 1500);
        }
        
        // Universal iOS fallback
        setTimeout(() => {
          console.log('Universal iOS fallback...');
          
          // Try to open in a way that works with iOS restrictions
          try {
            // Create temporary form and submit (works well on iOS)
            const form = document.createElement('form');
            form.method = 'GET';
            form.action = waUrl;
            form.target = '_blank';
            form.style.display = 'none';
            document.body.appendChild(form);
            form.submit();
            document.body.removeChild(form);
          } catch (error) {
            console.error('Form method failed:', error);
            // Force navigation as last resort
            window.location.href = waUrl;
          }
        }, 3000);
      }
      
      // Super aggressive approach for Samsung devices
      function forceSamsungOpen() {
        console.log('Applying Samsung-specific fixes...');
        
        // Method 1: Multiple rapid attempts
        const methods = [
          () => window.open(waUrl, '_blank'),
          () => window.location.href = waUrl,
          () => window.open(apiUrl, '_blank'),
          () => window.location.href = apiUrl,
          () => window.location.href = whatsappUrl,
          () => window.location.replace(waUrl)
        ];
        
        let currentMethod = 0;
        
        function tryNextMethod() {
          if (currentMethod < methods.length) {
            console.log(`Trying Samsung method ${currentMethod + 1}`);
            try {
              methods[currentMethod]();
              currentMethod++;
              
              // Quick retry for Samsung
              if (currentMethod < methods.length) {
                setTimeout(tryNextMethod, 800);
              }
            } catch (error) {
              console.error(`Samsung method ${currentMethod + 1} failed:`, error);
              currentMethod++;
              setTimeout(tryNextMethod, 500);
            }
          }
        }
        
        tryNextMethod();
      }
      
      // Universal method for all devices
      function universalOpen() {
        // Create multiple iframes to trigger app detection
        const iframe1 = document.createElement('iframe');
        iframe1.style.display = 'none';
        iframe1.src = whatsappUrl;
        document.body.appendChild(iframe1);
        
        setTimeout(() => {
          document.body.removeChild(iframe1);
        }, 3000);
        
        // Method 2: User interaction trigger
        const link = document.createElement('a');
        link.href = waUrl;
        link.target = '_blank';
        link.rel = 'noopener noreferrer';
        link.style.display = 'none';
        document.body.appendChild(link);
        
        // Simulate click
        setTimeout(() => {
          link.click();
          document.body.removeChild(link);
        }, 500);
        
        // Method 3: Direct navigation after delay
        setTimeout(() => {
          console.log('Applying direct navigation fallback');
          window.location.href = waUrl;
        }, 1500);
      }
      
      // Main execution logic with Apple support
      if (isApple) {
        // Special handling for Apple devices (iPhone, iPad, Mac)
        alert(`Ø¬Ù‡Ø§Ø² Apple detected (${isIPhone ? 'iPhone' : isIPad ? 'iPad' : 'Mac'}) - Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£Ù…Ø«Ù„...`);
        forceAppleOpen();
        
        // Additional Apple-specific fallback
        setTimeout(() => {
          console.log('Apple additional fallback...');
          const manualUrl = waUrl;
          
          if (isIPad) {
            // iPad-specific handling
            try {
              window.open(manualUrl, '_blank', 'width=800,height=600');
            } catch (error) {
              window.location.href = manualUrl;
            }
          } else {
            // iPhone and Mac handling
            const confirmation = confirm('Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŸ\nØ§Ø¶ØºØ· Ù…ÙˆØ§ÙÙ‚ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
            if (confirmation) {
              window.location.href = manualUrl;
            }
          }
        }, 4000);
        
      } else if (isSamsung) {
        // Special handling for Samsung devices
        alert('Ø¬Ù‡Ø§Ø² Samsung detected - Ø³ÙŠØªÙ… ØªØ¬Ø±Ø¨Ø© Ø¹Ø¯Ø© Ø·Ø±Ù‚ Ù„Ù„ÙØªØ­...');
        forceSamsungOpen();
        
        // Additional Samsung-specific fallback
        setTimeout(() => {
          console.log('Samsung additional fallback...');
          // Try to show manual instructions
          const manualUrl = waUrl;
          const newWindow = window.open('', '_blank');
          if (newWindow) {
            newWindow.document.write(`
              <html dir="rtl">
                <head><title>ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</title></head>
                <body style="font-family: Arial; text-align: center; padding: 50px;">
                  <h2>ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</h2>
                  <p>Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ§Ù„ÙŠ:</p>
                  <a href="${manualUrl}" style="background: #25D366; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-size: 18px;">
                    ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
                  </a>
                  <p style="margin-top: 30px; color: #666;">
                    Ø£Ùˆ Ø§Ù†Ø³Ø® Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… ÙˆØ§ØªØµÙ„ Ø¨Ù‡: <strong>${cleanNumber}</strong>
                  </p>
                </body>
              </html>
            `);
          } else {
            // If popup blocked, force navigation
            window.location.href = manualUrl;
          }
        }, 3000);
        
      } else if (isAndroid) {
        // Other Android devices
        console.log('Android device - using standard method');
        universalOpen();
        
      } else if (isMobile || isTablet) {
        // Other mobile devices
        console.log('Mobile/Tablet device - using mobile method');
        try {
          // Try app URL first
          window.location.href = whatsappUrl;
          
          // Fallback to wa.me
          setTimeout(() => {
            window.location.href = waUrl;
          }, 2000);
        } catch (error) {
          console.error('Mobile method failed:', error);
          window.location.href = waUrl;
        }
        
      } else {
        // Desktop
        console.log('Desktop - using web method');
        try {
          const newWindow = window.open(waUrl, '_blank', 'noopener,noreferrer,width=800,height=600');
          if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {
            window.location.href = waUrl;
          }
        } catch (error) {
          console.error('Desktop method failed:', error);
          window.location.href = waUrl;
        }
      }
      
      // Emergency fallback for any device after 10 seconds
      setTimeout(() => {
        console.log('Emergency fallback triggered');
        if (confirm('Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø¹Ø¯. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŸ')) {
          window.open(`https://web.whatsapp.com/send?phone=${cleanNumber}&text=${encodeURIComponent(message)}`, '_blank');
        }
      }, 10000);
    }

    function updateFloatingCart(itemsCount) {
      const floatingCart = document.getElementById('floating-cart');
      const floatingBadge = document.getElementById('floating-cart-badge');
      
      if (itemsCount > 0) {
        floatingCart.classList.add('visible');
        floatingBadge.textContent = itemsCount;
        floatingBadge.style.display = 'flex';
      } else {
        floatingCart.classList.remove('visible');
        floatingBadge.style.display = 'none';
      }
    }

    function scrollToCart() {
      const cartSection = document.querySelector('.cart');
      cartSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ======= EVENTS =======
    // Floating cart button
    document.getElementById('floating-cart').addEventListener('click', scrollToCart);

    // Search functionality
    document.getElementById('search-input').addEventListener('input', (e) => {
      searchTerm = e.target.value.trim();
      renderProducts();
    });

    // Filter functionality
    document.querySelectorAll('.filter-tag').forEach(tag => {
      tag.addEventListener('click', () => {
        document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
        tag.classList.add('active');
        currentFilter = tag.getAttribute('data-category');
        renderProducts();
      });
    });

    document.getElementById('clear-cart').addEventListener('click', ()=>{
      cart.clear(); renderCart();
    });

    document.getElementById('checkout').addEventListener('click', ()=>{
      if (cart.size === 0) return;
      showCheckoutForm(true);
      document.getElementById('cust-name').focus();
    });

    document.getElementById('cancel-checkout').addEventListener('click', ()=>{
      showCheckoutForm(false);
    });

    // Preview modal events
    document.getElementById('close-preview').addEventListener('click', hideProductPreview);
    
    // Close modal when clicking overlay
    document.getElementById('preview-modal').addEventListener('click', (e) => {
      if (e.target.id === 'preview-modal') {
        hideProductPreview();
      }
    });

    // Preview quantity controls
    document.getElementById('preview-minus').addEventListener('click', () => {
      const input = document.getElementById('preview-quantity');
      input.value = Math.max(1, parseInt(input.value) - 1);
    });

    document.getElementById('preview-plus').addEventListener('click', () => {
      const input = document.getElementById('preview-quantity');
      input.value = parseInt(input.value) + 1;
    });

    // Add to cart from preview
    document.getElementById('preview-add-to-cart').addEventListener('click', () => {
      if (!currentPreviewProduct) return;
      
      const qty = parseInt(document.getElementById('preview-quantity').value);
      const existing = cart.get(currentPreviewProduct.id);
      cart.set(currentPreviewProduct.id, { 
        product: currentPreviewProduct, 
        qty: (existing?.qty || 0) + qty 
      });
      
      renderCart();
      hideProductPreview();
      
      // Show success message
      const btn = document.getElementById('preview-add-to-cart');
      const originalText = btn.textContent;
      btn.textContent = 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“';
      btn.style.background = '#16a34a';
      
      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '';
      }, 1000);
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        hideProductPreview();
      }
    });

    // Test WhatsApp button with enhanced debugging
    document.getElementById('test-whatsapp').addEventListener('click', ()=>{
      const testMessage = 'ğŸ”§ Ù…Ø±Ø­Ø¨Ø§! Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† AquaTech Pro - Ø³Ø¨Ø§ÙƒØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©. âœ…\n\nÙ†Ø­Ù† Ø¬Ø§Ù‡Ø²ÙˆÙ† Ù„Ø®Ø¯Ù…ØªÙƒÙ…!';
      
      // Enhanced device detection for debugging
      const userAgent = navigator.userAgent;
      const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(userAgent);
      const isAndroid = /android/i.test(userAgent);
      const isSamsung = /samsung/i.test(userAgent);
      const isTablet = /tablet|ipad/i.test(userAgent);
      
      console.log('=== ENHANCED WHATSAPP TEST ===');
      console.log('Store WhatsApp Number:', STORE_WHATSAPP_NUMBER);
      console.log('Test Message:', testMessage);
      console.log('Full User Agent:', userAgent);
      console.log('Device Detection:', {
        isMobile,
        isAndroid,
        isSamsung,
        isTablet,
        platform: navigator.platform,
        vendor: navigator.vendor
      });
      
      // Show device info to user
      let deviceInfo = 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:\n';
      deviceInfo += `Ø§Ù„Ù†ÙˆØ¹: ${isMobile ? 'Ù‡Ø§ØªÙ/ØªØ§Ø¨Ù„Øª' : 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}\n`;
      if (isAndroid) deviceInfo += 'Ù†Ø¸Ø§Ù…: Android\n';
      if (isSamsung) deviceInfo += 'Ø§Ù„Ù…Ø§Ø±ÙƒØ©: Samsung\n';
      if (isTablet) deviceInfo += 'Ø§Ù„ÙØ¦Ø©: ØªØ§Ø¨Ù„Øª\n';
      deviceInfo += '\nØ³ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¢Ù†...';
      
      alert(deviceInfo);
      
      try {
        openWhatsapp(testMessage, STORE_WHATSAPP_NUMBER);
        console.log('Enhanced openWhatsapp function called successfully');
      } catch (error) {
        console.error('Error in enhanced test:', error);
        alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨: ' + error.message + '\n\nÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØªØ¬Ø±Ø¨Ø© ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙŠØ¯ÙˆÙŠØ§Ù‹.');
      }
    });

    // Special Samsung test button
    document.getElementById('test-samsung').addEventListener('click', ()=>{
      const testMessage = 'ğŸ”§ [Samsung Test] Ù…Ø±Ø­Ø¨Ø§ Ù…Ù† AquaTech Pro! Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø§Øµ Ù„Ø£Ø¬Ù‡Ø²Ø© Samsung.';
      
      alert('ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø§Øµ Ù„Ø£Ø¬Ù‡Ø²Ø© Samsung\n\nØ³ÙŠØªÙ… ØªØ¬Ø±Ø¨Ø© Ø¹Ø¯Ø© Ø·Ø±Ù‚ Ù…Ø®ØªÙ„ÙØ© Ù„ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.\nØ¥Ø°Ø§ Ù„Ù… ØªØ¹Ù…Ù„ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŒ Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ ÙˆØ³ØªØ¸Ù‡Ø± Ø·Ø±Ù‚ Ø£Ø®Ø±Ù‰.');
      
      // Force Samsung detection for testing
      const cleanNumber = STORE_WHATSAPP_NUMBER.replace(/\D/g, '');
      const waUrl = `https://wa.me/${cleanNumber}?text=${encodeURIComponent(testMessage)}`;
      const whatsappUrl = `whatsapp://send?phone=${cleanNumber}&text=${encodeURIComponent(testMessage)}`;
      
      console.log('=== SAMSUNG SPECIFIC TEST ===');
      console.log('Using aggressive Samsung methods...');
      
      // Method 1: Multiple quick attempts
      setTimeout(() => window.location.href = whatsappUrl, 100);
      setTimeout(() => window.location.href = waUrl, 800);
      setTimeout(() => window.open(waUrl, '_blank'), 1500);
      
      // Method 2: Create clickable link
      setTimeout(() => {
        const link = document.createElement('a');
        link.href = waUrl;
        link.target = '_blank';
        link.click();
      }, 2500);
      
      // Method 3: Manual backup
      setTimeout(() => {
        if (confirm('Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ØŸ Ø§Ø¶ØºØ· Ù…ÙˆØ§ÙÙ‚ Ù„ØªØ¬Ø±Ø¨Ø© Ø·Ø±ÙŠÙ‚Ø© Ø£Ø®Ø±Ù‰.')) {
          const newWindow = window.open('', '_blank');
          newWindow.document.write(`
            <html dir="rtl">
              <head><title>ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ - Samsung</title></head>
              <body style="font-family: Arial; text-align: center; padding: 30px; background: #f0f0f0;">
                <h2 style="color: #25D366;">ğŸ”§ AquaTech Pro</h2>
                <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£Ø­Ø¯ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                <div style="margin: 20px 0;">
                  <a href="${waUrl}" style="display: inline-block; background: #25D366; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; margin: 5px; font-size: 16px;">
                    ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ (Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰)
                  </a>
                </div>
                <div style="margin: 20px 0;">
                  <a href="${whatsappUrl}" style="display: inline-block; background: #128C7E; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; margin: 5px; font-size: 16px;">
                    ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ (Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©)
                  </a>
                </div>
                <div style="margin: 20px 0;">
                  <a href="https://web.whatsapp.com/send?phone=${cleanNumber}&text=${encodeURIComponent(testMessage)}" style="display: inline-block; background: #075E54; color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; margin: 5px; font-size: 16px;">
                    ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨
                  </a>
                </div>
                <p style="color: #666; margin-top: 30px;">
                  Ø£Ùˆ Ø§ØªØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©: <strong style="color: #25D366;">${cleanNumber}</strong>
                </p>
              </body>
            </html>
          `);
        }
      }, 4000);
    });

    // Special Apple test button
    document.getElementById('test-apple').addEventListener('click', ()=>{
      const testMessage = 'ğŸ [Apple Test] Ù…Ø±Ø­Ø¨Ø§ Ù…Ù† AquaTech Pro! Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø§Øµ Ù„Ø£Ø¬Ù‡Ø²Ø© Apple.';
      
      alert('ğŸ Ø§Ø®ØªØ¨Ø§Ø± Ø®Ø§Øµ Ù„Ø£Ø¬Ù‡Ø²Ø© Apple\n\nØ³ÙŠØªÙ… ØªØ¬Ø±Ø¨Ø© Ø¹Ø¯Ø© Ø·Ø±Ù‚ Ù…Ø®ØªÙ„ÙØ© Ù„ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.\nÙ…ØµÙ…Ù…Ø© Ø®ØµÙŠØµØ§Ù‹ Ù„Ø£Ø¬Ù‡Ø²Ø© iPhone Ùˆ iPad Ùˆ Mac.');
      
      // Force Apple detection for testing
      const cleanNumber = STORE_WHATSAPP_NUMBER.replace(/\D/g, '');
      const waUrl = `https://wa.me/${cleanNumber}?text=${encodeURIComponent(testMessage)}`;
      const whatsappUrl = `whatsapp://send?phone=${cleanNumber}&text=${encodeURIComponent(testMessage)}`;
      
      console.log('=== APPLE SPECIFIC TEST ===');
      console.log('Using Apple-optimized methods...');
      
      // Method 1: Safari-optimized approach
      if (navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome')) {
        console.log('Safari detected - using Safari-optimized method');
        window.location.href = waUrl;
        
        setTimeout(() => {
          if (confirm('Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ØŸ Ø¬Ø±Ø¨ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.')) {
            window.open(whatsappUrl, '_self');
          }
        }, 2000);
      } else {
        // Method 2: Universal Apple method
        setTimeout(() => window.location.href = whatsappUrl, 100);
        setTimeout(() => window.open(waUrl, '_blank'), 1000);
      }
      
      // Method 3: iPhone/iPad specific
      setTimeout(() => {
        const link = document.createElement('a');
        link.href = waUrl;
        link.target = '_blank';
        link.setAttribute('rel', 'noopener');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }, 2500);
      
      // Method 4: Apple backup window
      setTimeout(() => {
        if (confirm('Ù„Ù… ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ØŸ Ø§Ø¶ØºØ· Ù…ÙˆØ§ÙÙ‚ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª.')) {
          const newWindow = window.open('', '_blank');
          newWindow.document.write(`
            <html dir="rtl" lang="ar">
              <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ - Apple</title>
                <style>
                  body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
                    text-align: center;
                    padding: 30px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    margin: 0;
                  }
                  .container {
                    background: rgba(255,255,255,0.95);
                    color: #333;
                    padding: 30px;
                    border-radius: 20px;
                    max-width: 400px;
                    margin: 0 auto;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                  }
                  h2 { color: #007AFF; margin-bottom: 20px; }
                  .btn {
                    display: inline-block;
                    background: linear-gradient(45deg, #25D366, #128C7E);
                    color: white;
                    padding: 15px 25px;
                    text-decoration: none;
                    border-radius: 12px;
                    margin: 8px;
                    font-size: 16px;
                    font-weight: bold;
                    transition: transform 0.2s;
                    border: none;
                    cursor: pointer;
                    box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
                  }
                  .btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
                  }
                  .btn.secondary {
                    background: linear-gradient(45deg, #007AFF, #0056D6);
                    box-shadow: 0 4px 15px rgba(0, 122, 255, 0.4);
                  }
                  .contact-info {
                    background: #f8f9fa;
                    padding: 15px;
                    border-radius: 10px;
                    margin-top: 20px;
                    border-left: 4px solid #007AFF;
                  }
                </style>
              </head>
              <body>
                <div class="container">
                  <h2>ğŸ AquaTech Pro - Apple</h2>
                  <p style="margin-bottom: 25px;">Ø§Ø®ØªØ± Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø¬Ù‡Ø§Ø²Ùƒ:</p>
                  
                  <div style="margin: 20px 0;">
                    <a href="${waUrl}" class="btn">
                      ğŸ“± ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ (iPhone/iPad)
                    </a>
                  </div>
                  
                  <div style="margin: 20px 0;">
                    <a href="${whatsappUrl}" class="btn">
                      ğŸ’¬ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±
                    </a>
                  </div>
                  
                  <div style="margin: 20px 0;">
                    <a href="https://web.whatsapp.com/send?phone=${cleanNumber}&text=${encodeURIComponent(testMessage)}" class="btn secondary">
                      ğŸŒ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨ (Safari)
                    </a>
                  </div>
                  
                  <div class="contact-info">
                    <strong>ğŸ“ Ù„Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:</strong><br>
                    <span style="color: #007AFF; font-size: 18px; font-weight: bold;">${cleanNumber}</span>
                  </div>
                  
                  <p style="color: #666; margin-top: 20px; font-size: 14px;">
                    ğŸ’¡ Ù†ØµÙŠØ­Ø©: Ø¥Ø°Ø§ Ù„Ù… ØªØ¹Ù…Ù„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·ØŒ Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù‚Ù… ÙˆØ§ØªØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©
                  </p>
                </div>
                
                <script>
                  // Auto-try opening WhatsApp after 2 seconds
                  setTimeout(() => {
                    if (navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')) {
                      window.location.href = '${whatsappUrl}';
                    }
                  }, 2000);
                </script>
              </body>
            </html>
          `);
        }
      }, 4000);
    });

    document.getElementById('send-whatsapp').addEventListener('click', ()=>{
      const { valid, errors, name, phone, email, location } = validateForm();
      const errBox = document.getElementById('form-error');
      const okBox  = document.getElementById('form-ok');

      if (!valid) {
        errBox.textContent = errors.join(' ');
        errBox.style.display = '';
        okBox.style.display = 'none';
        return;
      }

      const items = Array.from(cart.values());
      const msg = buildWhatsappMessage({name, phone, email, location}, items);
      
      console.log('Sending WhatsApp message:', msg);
      console.log('Phone number used:', phone);
      
      // Enhanced device detection for better user feedback
      const userAgent = navigator.userAgent;
      const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(userAgent);
      const isSamsung = /samsung/i.test(userAgent);
      const isTablet = /tablet|ipad/i.test(userAgent);
      
      console.log('Device info for order:', { isMobile, isSamsung, isTablet });
      
      // Show appropriate message based on device
      let statusMessage = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨';
      if (isSamsung) {
        statusMessage += ' (Ø¬Ù‡Ø§Ø² Samsung - Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ø«ÙˆØ§Ù†Ù Ø¥Ø¶Ø§ÙÙŠØ©)';
      } else if (isTablet) {
        statusMessage += ' (ØªØ§Ø¨Ù„Øª - Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨)';
      } else if (isMobile) {
        statusMessage += ' (Ø³ÙŠØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨)';
      } else {
        statusMessage += ' (Ø³ÙŠØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙŠØ¨)';
      }
      statusMessage += '...';
      
      okBox.textContent = statusMessage;
      okBox.style.display = '';
      errBox.style.display = 'none';

      // Add small delay to show the message
      setTimeout(() => {
        try {
          openWhatsapp(msg, STORE_WHATSAPP_NUMBER);
        } catch (error) {
          console.error('Error in openWhatsapp:', error);
          errBox.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨: ' + error.message;
          errBox.style.display = '';
          okBox.style.display = 'none';
        }
      }, 500);
    });

    // ======= INIT =======
    document.getElementById('year').textContent = new Date().getFullYear();
    renderProducts();
    renderCart();
  </script>
</body>
</html>
